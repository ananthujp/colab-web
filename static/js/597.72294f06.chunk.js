"use strict";(self.webpackChunkcolab=self.webpackChunkcolab||[]).push([[597],{5597:(e,t,l)=>{l.r(t),l.d(t,{default:()=>S});var s=l(2791),a=l(3710),r=l(9221),i=l(7689),n=l(2481),o=l(6770),d=l.n(o),c=(l(6009),l(1241)),u=l(9208),x=l(2189),m=l(3666),f=l(1300),h=l(6796),g=l(3832),v=l(7070),b=l(9389),j=l(4424),p=l(4692),w=l(4281),N=l(9736),y=l(3441),k=l(5756),C=l(4857),Z=l(184);const S=function(){const e=(0,i.s0)(),{user:t}=(0,r.Z)(),l=(0,i.UO)(),[o,S]=(0,s.useState)(!1);(0,s.useEffect)((()=>{console.log("posts",l.createId),l.createId&&S(!0),l.createId&&(0,n.QT)((0,n.JU)(c.db,"virtual",l.createId)).then((e=>{O(e.data().title),Q(e.data().photos),P(e.data().content),Y([e.data().field,e.data().faculty])})).then((()=>S(!1)))}),[]);const[I,P]=(0,s.useState)(""),[L,O]=(0,s.useState)(""),[U,B]=(0,s.useState)(!1),[R,T]=(0,s.useState)(!1),[D,F]=(0,s.useState)("url"),[J,A]=(0,s.useState)(!1),[E,G]=(0,s.useState)(""),[z,q]=(0,s.useState)(""),[M,Q]=(0,s.useState)([]),[V,Y]=(0,s.useState)([]),[H,K]=(0,s.useState)(!1),[W,X]=(0,s.useState)(),[$,_]=(0,s.useState)();return(0,s.useEffect)((()=>{if("url"!==D){const e=$.match(/\/d\/([^/]+)/)[1];X("https://lh3.googleusercontent.com/d/".concat(e))}}),[$]),(0,Z.jsx)(a.Z,{page:"themes",title:"Create Lab Item",hideBreadcrumb:!0,children:(0,Z.jsx)("div",{className:"flex flex-col font-mont items-center h-full overflow-scroll w-full",children:l.createId?U?(0,Z.jsx)(y.ZP,{InitialValue:{content:I,title:L,photos:M,field:V[0],faculty:V[1]},setPreviewMode:B}):"admin"===(null===t||void 0===t?void 0:t.role)&&(0,Z.jsxs)("div",{className:"flex gap-2 relative flex-col md:mx-12 h-full  w-full bg-white px-2",children:[(0,Z.jsxs)(v.default,{title:"Add Images",open:H,onOk:()=>{K(!1),(e=>{try{return Boolean(new URL(e))}catch(t){return!1}})(W)&&Q([...M,{uid:M.length,name:W.substring(W.lastIndexOf("/")+1),status:"done",url:W}]),F("url"),_(""),X("")},okButtonProps:{className:"bg-blue-400 "},onCancel:()=>{K(!1)},children:[(0,Z.jsx)("p",{className:"my-1",children:"url"===D?"Add image URL":"Google drive sharable link"}),"url"!==D&&(0,Z.jsx)(b.Z,{onChange:e=>_(e.target.value),value:$,prefix:(0,Z.jsx)("div",{className:"flex flex-row bg-indigo-100 rounded-sm text-xs py-0.5 px-2",children:"Drive link :"})}),(0,Z.jsx)(b.Z,{className:"mt-2",onChange:e=>X(e.target.value),value:W,disabled:"url"!==D,prefix:(0,Z.jsx)(u.Z,{className:"w-4 text-gray-400"})}),(0,Z.jsx)("div",{className:"w-full flex justify-center mt-2",children:(0,Z.jsxs)(j.ZP.Group,{value:D,onChange:e=>F(e.target.value),children:[(0,Z.jsx)(j.ZP.Button,{value:"url",children:"URL"}),(0,Z.jsx)(j.ZP.Button,{value:"gdrive",children:"Google Drive"})]})})]}),(0,Z.jsxs)("div",{className:"flex flex-row justify-between w-full my-3",children:[(0,Z.jsx)("h1",{className:"ml-1 font-semibold font-mont text-2xl text-gray-800",children:"Create a new post"}),(0,Z.jsxs)("div",{className:"flex flex-row gap-4 justify-center items-center",children:[(0,Z.jsx)("div",{className:"flex flex-row justify-center items-center",children:(0,Z.jsxs)("div",{onClick:()=>B(!0),className:"px-2 items-center cursor-pointer gap-2 flex flex-row py-1 rounded-full font-mont font-medium text-slate-600 bg-gradient-to-br from-indigo-50 to-indigo-100 hover:to-indigo-200 border border-indigo-300 ",children:[(0,Z.jsx)(x.Z,{className:"w-5"}),(0,Z.jsx)("h1",{className:"text-xs",children:"Preview"})]})}),(0,Z.jsx)("div",{className:"flex flex-row justify-center items-center",children:(0,Z.jsxs)("div",{onClick:()=>(T(!0),void(0,n.pl)((0,n.JU)(c.db,"virtual",l.createId),{title:L,content:I,photos:M,field:V[0],faculty:V[1]}).then((()=>{T(!1),e("/virtual/".concat(l.createId))}))),className:"px-2 items-center cursor-pointer gap-2 flex flex-row py-1 rounded-full font-mont font-medium text-slate-600 bg-gradient-to-br from-indigo-50 to-indigo-100 hover:to-indigo-200 border border-indigo-300 ",children:[R?(0,Z.jsx)(p.Z,{className:"w-5 filter saturate-200 "}):(0,Z.jsx)(m.Z,{className:"w-5"}),!R&&(0,Z.jsx)("h1",{className:"text-xs",children:"Save"})]})})]})]}),(0,Z.jsxs)("div",{className:"flex flex-col transition-all bg-indigo-50 hover:bg-indigo-100 rounded-lg border-slate-300 border",children:[(0,Z.jsx)("div",{className:"flex flex-row items-center  p-1",children:(0,Z.jsx)("h1",{className:"font-semibold ml-2 text-sm text-slate-800",children:"Title :"})}),(0,Z.jsx)(b.Z,{className:"mx-2 mb-2 w-[98%]",size:"large",onChange:e=>O(e.target.value),value:L,placeholder:"Title of the post",prefix:(0,Z.jsx)(f.Z,{className:"w-4 mr-1 text-indigo-700"})})]}),(0,Z.jsxs)("div",{className:"flex flex-col transition-all bg-indigo-50 hover:bg-indigo-100 rounded-lg border-slate-300 border",children:[(0,Z.jsx)("div",{className:"flex flex-row items-center  p-1",children:(0,Z.jsx)("h1",{className:"font-semibold ml-2 text-sm text-slate-800",children:"Faculty :"})}),(0,Z.jsx)(w.Z,{value:V,onChange:e=>Y(e),className:"px-2 w-full mb-2",options:(0,k.J)(C.O)})]}),(0,Z.jsxs)("div",{className:"flex flex-col  transition-all hover:bg-indigo-100 bg-indigo-50 rounded-lg border-slate-300 border",children:[(0,Z.jsx)("div",{className:"flex flex-row items-center  p-1",children:(0,Z.jsx)("h1",{className:"font-semibold ml-2 text-sm text-slate-800",children:"Images :"})}),(0,Z.jsx)(N.Z,{listType:"picture-card",fileList:M,onPreview:async e=>{e.url||e.preview||(e.preview=await(e=>new Promise(((t,l)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>l(e)})))(e.originFileObj)),G(e.url||e.preview),A(!0),q(e.name||e.url.substring(e.url.lastIndexOf("/")+1))},openFileDialogOnClick:!1,className:"ml-2",onChange:e=>{let{fileList:t}=e;return Q(t)},children:M.length>=8?null:(0,Z.jsx)("div",{className:"w-full h-full items-center justify-center flex bg-white rounded-md",onClick:()=>{K(!0)},children:(0,Z.jsx)(h.Z,{className:"w-5"})})}),(0,Z.jsx)("div",{}),(0,Z.jsx)(v.default,{open:J,title:z,footer:null,onCancel:()=>A(!1),children:(0,Z.jsx)("img",{alt:"example",style:{width:"100%"},src:E})})]}),(0,Z.jsx)("div",{className:" mb-2",children:(0,Z.jsx)(d(),{modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],["link"]]},theme:"snow",value:I,onChange:P})})]}):(0,Z.jsx)("button",{onClick:()=>{"admin"===(null===t||void 0===t?void 0:t.role)?(0,n.ET)((0,n.hJ)(c.db,"virtual"),{title:"",photos:[],content:{},field:"",faculty:""}).then((t=>e(t.id))):g.ZP.error("You are not authorized to create a post")},className:"w-24 h-6 bg-blue-500 rounded-full text-white font-mont items-center justify-center",children:"Login"})})})}}}]);
//# sourceMappingURL=597.72294f06.chunk.js.map