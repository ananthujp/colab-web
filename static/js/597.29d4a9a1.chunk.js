"use strict";(self.webpackChunkcolab=self.webpackChunkcolab||[]).push([[597],{5597:(e,l,t)=>{t.r(l),t.d(l,{default:()=>k});var s=t(2791),i=t(3710),r=t(9221),o=t(7689),a=t(2481),n=t(6770),d=t.n(n),c=(t(6009),t(1241)),u=t(9208),x=t(2189),m=t(3666),f=t(1300),h=t(6796),g=t(3832),v=t(7070),b=t(9389),j=t(4424),p=t(4692),w=t(4281),N=t(9736),y=t(7769),Z=t(5756),S=t(4857),C=t(184);const k=function(){const e=(0,o.s0)(),{user:l}=(0,r.Z)(),t=(0,o.UO)(),[n,k]=(0,s.useState)(!1);(0,s.useEffect)((()=>{console.log("posts",t.createId),t.createId&&k(!0),t.createId&&(0,a.QT)((0,a.JU)(c.db,"virtual",t.createId)).then((e=>{U(e.data().title),V(e.data().photos),P(e.data().content),H([e.data().field,e.data().faculty])})).then((()=>k(!1)))}),[]);const[I,P]=(0,s.useState)(""),[O,U]=(0,s.useState)(""),[L,T]=(0,s.useState)(!1),[B,R]=(0,s.useState)(!1),[D,E]=(0,s.useState)("url"),[F,G]=(0,s.useState)(!1),[J,z]=(0,s.useState)(""),[A,M]=(0,s.useState)(""),[q,V]=(0,s.useState)([]),[_,H]=(0,s.useState)([]),[Q,Y]=(0,s.useState)(!1),[K,W]=(0,s.useState)(),[X,$]=(0,s.useState)();return(0,s.useEffect)((()=>{if("url"!==D){const e=X.match(/\/d\/([^/]+)/)[1];W("https://lh3.googleusercontent.com/d/".concat(e))}}),[X]),(0,C.jsx)(i.Z,{page:"themes",title:"Create Lab Item",hideBreadcrumb:!0,children:(0,C.jsx)("div",{className:"flex flex-col font-mont items-center h-full overflow-scroll w-full",children:t.createId?L?(0,C.jsx)(y.ZP,{InitialValue:{content:I,title:O,photos:q,field:_[0],faculty:_[1]},setPreviewMode:T}):"admin"===(null===l||void 0===l?void 0:l.role)&&(0,C.jsxs)("div",{className:"flex gap-2 relative flex-col md:mx-12 h-full  w-full bg-white px-2",children:[(0,C.jsxs)(v.default,{title:"Add Images",open:Q,onOk:()=>{Y(!1),(e=>{try{return Boolean(new URL(e))}catch(l){return!1}})(K)&&V([...q,{uid:q.length,name:K.substring(K.lastIndexOf("/")+1),status:"done",url:K}]),E("url"),$(""),W("")},okButtonProps:{className:"bg-blue-400 "},onCancel:()=>{Y(!1)},children:[(0,C.jsx)("p",{className:"my-1",children:"url"===D?"Add image URL":"Google drive sharable link"}),"url"!==D&&(0,C.jsx)(b.Z,{onChange:e=>$(e.target.value),value:X,prefix:(0,C.jsx)("div",{className:"flex flex-row bg-indigo-100 rounded-sm text-xs py-0.5 px-2",children:"Drive link :"})}),(0,C.jsx)(b.Z,{className:"mt-2",onChange:e=>W(e.target.value),value:K,disabled:"url"!==D,prefix:(0,C.jsx)(u.Z,{className:"w-4 text-gray-400"})}),(0,C.jsx)("div",{className:"w-full flex justify-center mt-2",children:(0,C.jsxs)(j.ZP.Group,{value:D,onChange:e=>E(e.target.value),children:[(0,C.jsx)(j.ZP.Button,{value:"url",children:"URL"}),(0,C.jsx)(j.ZP.Button,{value:"gdrive",children:"Google Drive"})]})})]}),(0,C.jsxs)("div",{className:"flex flex-row justify-between w-full my-3",children:[(0,C.jsx)("h1",{className:"ml-1 font-semibold font-mont text-2xl text-gray-800",children:"Create a new post"}),(0,C.jsxs)("div",{className:"flex flex-row gap-4 justify-center items-center",children:[(0,C.jsx)("div",{className:"flex flex-row justify-center items-center",children:(0,C.jsxs)("div",{onClick:()=>T(!0),className:"px-2 items-center cursor-pointer gap-2 flex flex-row py-1 rounded-full font-mont font-medium text-slate-600 bg-gradient-to-br from-indigo-50 to-indigo-100 hover:to-indigo-200 border border-indigo-300 ",children:[(0,C.jsx)(x.Z,{className:"w-5"}),(0,C.jsx)("h1",{className:"text-xs",children:"Preview"})]})}),(0,C.jsx)("div",{className:"flex flex-row justify-center items-center",children:(0,C.jsxs)("div",{onClick:()=>(R(!0),void(0,a.pl)((0,a.JU)(c.db,"virtual",t.createId),{title:O,content:I,photos:q,field:_[0],faculty:_[1]}).then((()=>{R(!1),e("/virtual/".concat(t.createId))}))),className:"px-2 items-center cursor-pointer gap-2 flex flex-row py-1 rounded-full font-mont font-medium text-slate-600 bg-gradient-to-br from-indigo-50 to-indigo-100 hover:to-indigo-200 border border-indigo-300 ",children:[B?(0,C.jsx)(p.Z,{className:"w-5 filter saturate-200 "}):(0,C.jsx)(m.Z,{className:"w-5"}),!B&&(0,C.jsx)("h1",{className:"text-xs",children:"Save"})]})})]})]}),(0,C.jsxs)("div",{className:"flex flex-col transition-all bg-indigo-50 hover:bg-indigo-100 rounded-lg border-slate-300 border",children:[(0,C.jsx)("div",{className:"flex flex-row items-center  p-1",children:(0,C.jsx)("h1",{className:"font-semibold ml-2 text-sm text-slate-800",children:"Title :"})}),(0,C.jsx)(b.Z,{className:"mx-2 mb-2 w-[98%]",size:"large",onChange:e=>U(e.target.value),value:O,placeholder:"Title of the post",prefix:(0,C.jsx)(f.Z,{className:"w-4 mr-1 text-indigo-700"})})]}),(0,C.jsxs)("div",{className:"flex flex-col transition-all bg-indigo-50 hover:bg-indigo-100 rounded-lg border-slate-300 border",children:[(0,C.jsx)("div",{className:"flex flex-row items-center  p-1",children:(0,C.jsx)("h1",{className:"font-semibold ml-2 text-sm text-slate-800",children:"Faculty :"})}),(0,C.jsx)(w.Z,{value:_,onChange:e=>H(e),className:"px-2 w-full mb-2",options:(0,Z.J)(S.O)})]}),(0,C.jsxs)("div",{className:"flex flex-col  transition-all hover:bg-indigo-100 bg-indigo-50 rounded-lg border-slate-300 border",children:[(0,C.jsx)("div",{className:"flex flex-row items-center  p-1",children:(0,C.jsx)("h1",{className:"font-semibold ml-2 text-sm text-slate-800",children:"Images :"})}),(0,C.jsx)(N.Z,{listType:"picture-card",fileList:q,onPreview:async e=>{e.url||e.preview||(e.preview=await(e=>new Promise(((l,t)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>l(s.result),s.onerror=e=>t(e)})))(e.originFileObj)),z(e.url||e.preview),G(!0),M(e.name||e.url.substring(e.url.lastIndexOf("/")+1))},openFileDialogOnClick:!1,className:"ml-2",onChange:e=>{let{fileList:l}=e;return V(l)},children:q.length>=8?null:(0,C.jsx)("div",{className:"w-full h-full items-center justify-center flex bg-white rounded-md",onClick:()=>{Y(!0)},children:(0,C.jsx)(h.Z,{className:"w-5"})})}),(0,C.jsx)("div",{}),(0,C.jsx)(v.default,{open:F,title:A,footer:null,onCancel:()=>G(!1),children:(0,C.jsx)("img",{alt:"example",style:{width:"100%"},src:J})})]}),(0,C.jsx)("div",{className:" mb-2",children:(0,C.jsx)(d(),{modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],["link"]]},theme:"snow",value:I,onChange:P})})]}):(0,C.jsx)("button",{onClick:()=>{"admin"===(null===l||void 0===l?void 0:l.role)?(0,a.ET)((0,a.hJ)(c.db,"virtual"),{title:"",photos:[],content:{},field:"",faculty:""}).then((l=>e(l.id))):g.ZP.error("You are not authorized to create a post")},className:"w-24 h-6 bg-blue-500 rounded-full text-white font-mont items-center justify-center",children:"Login"})})})}},7769:(e,l,t)=>{t.d(l,{S3:()=>f,ZP:()=>h,pI:()=>x});t(2481);var s=t(2791),i=(t(1241),t(1087)),r=t(7689),o=t(8208),a=t(3410),n=t(9158),d=t(2566),c=(t(6009),t(4857)),u=t(184);function x(e,l){const t=e.find((e=>e.label===l[0]));if(t){return{child:t.prof.find((e=>e.name===l[1])),parent:t}}return null}const m=e=>{var l,t;let{fac:s}=e;const r=x(c.O,s);return(0,u.jsxs)(i.rU,{to:"/themes/"+c.O.findIndex((e=>e.label===s[0])),className:" mr-0 ml-auto flex flex-row mb-2 float-left items-center bg-gradient-to-br from-indigo-50 to-indigo-100 hover:to-indigo-200 transition-all  border cursor-default border-indigo-200 px-1 rounded-full",children:[(0,u.jsx)("img",{src:null===r||void 0===r||null===(l=r.parent)||void 0===l?void 0:l.img,className:"w-5 h-5",alt:""}),(0,u.jsx)("div",{className:"flex flex-col",children:(0,u.jsx)("h1",{className:"ml-1 font-semibold text-xs text-gray-800 pr-2",children:null===r||void 0===r||null===(t=r.parent)||void 0===t?void 0:t.label})})]})},f=e=>{var l,t,s,r,a;let{fac:n}=e;const d=x(c.O,n);return(0,u.jsxs)(i.rU,{to:"/themes/"+c.O.findIndex((e=>e.label===n[0])),className:"z-10 flex flex-row mr-auto mb-2 float-left items-center bg-gradient-to-br from-indigo-50 to-indigo-100 transition-all hover:to-indigo-200 border cursor-default border-indigo-200 px-1 rounded-full",children:[(0,u.jsxs)(o.C,{src:null===d||void 0===d||null===(l=d.child)||void 0===l?void 0:l.img,className:"my-1 border border-indigo-200 bg-blue-400",children:[null===d||void 0===d||null===(t=d.child)||void 0===t||null===(s=t.name)||void 0===s?void 0:s.slice(0,1)," "]}),(0,u.jsxs)("div",{className:"flex flex-col",children:[(0,u.jsx)("h1",{className:"ml-1 font-semibold text-xs text-gray-800 pr-2",children:null===d||void 0===d||null===(r=d.child)||void 0===r?void 0:r.name}),(0,u.jsx)("h1",{className:"ml-1  text-xs text-gray-400 pr-2",children:null===d||void 0===d||null===(a=d.child)||void 0===a?void 0:a.designation})]})]})};const h=function(e){let{id:l,setPreviewMode:t,InitialValue:i}=e;const[o,h]=(0,s.useState)(""),[g,v]=(0,s.useState)(""),[b,j]=(0,s.useState)(""),[p,w]=(0,s.useState)(""),[N,y]=(0,s.useState)([]);return(0,r.UO)(),console.log(p),(0,s.useEffect)((()=>{v(i.title),y(i.photos),h(i.content),j([i.field,i.faculty]),w(x(c.O,[i.field,i.faculty]))}),[i]),(0,u.jsxs)("div",{className:"flex relative overflow-scroll w-full h-full flex-col md:mx-48 bg-white px-2",children:[(0,u.jsxs)("div",{className:"flex flex-row justify-between w-full ",children:[(0,u.jsx)(f,{fac:b}),t?(0,u.jsx)("div",{className:"flex flex-row justify-center items-center",children:(0,u.jsxs)("div",{onClick:()=>t(!1),className:"px-2 items-center cursor-pointer gap-2 flex flex-row py-1 rounded-full font-mont font-medium text-slate-600 bg-gradient-to-br from-indigo-50 to-indigo-100 hover:to-indigo-200 border border-indigo-300 ",children:[(0,u.jsx)(n.Z,{className:"w-5"}),(0,u.jsx)("h1",{className:"text-xs",children:"Close Preview"})]})}):(0,u.jsx)(m,{fac:b})]}),(0,u.jsx)("div",{className:"flex bg-indigo-100 md:mx-6 mx-2 p-2 rounded-md border border-indigo-200 flex-row w-full xoverflow-x-scroll items-center justify-start ",children:(0,u.jsxs)(a.Z.PreviewGroup,{children:[(0,u.jsxs)("h1",{className:"-ml-5 -mr-8 -mt-6 md:-rotate-90 whitespace-nowrap font-mont px-2 py-0.5 rounded-md font-medium text-slate-600   text-sm transform origin-bottom  border border-indigo-300 bg-indigo-400/20 ",children:[(0,u.jsx)(d.Z,{className:"w-5 inline-block -mt-1 mr-2"}),"Images"]}),N&&N.map((e=>(0,u.jsx)(a.Z,{className:"object-cover border border-indigo-100",height:100,src:e.url},"img.id.".concat(e.uid))))]})}),(0,u.jsx)("div",{className:"ql-viewer mx-2 md:mx-6 mb-4 mt-4",dangerouslySetInnerHTML:{__html:o}})]})}}}]);
//# sourceMappingURL=597.29d4a9a1.chunk.js.map